{% extends "base.html.twig" %}

{% block title %}
Mes plantes
{{ parent() }}
{% endblock %}
{% block body %}
<h1>Plantarium</h1>

<h2>Mes plantes</h2>

    {% if userPlants is empty %}
        <p>Vous n'avez aucune plantes d'enregistrées sur votre profil.</p>
    {% else %}
        <ul>
            {% for userPlant in userPlants %}
                <li>
                    {% if userPlant.plant %}
                        <img src="{{ vich_uploader_asset(userPlant.plant, 'image') }}" alt="{{ userPlant.plant.name }}" style="max-width: 200px; max-height: 200px;">
                      
                    {% else %}
                        <p>No image available</p>
                    {% endif %}
                    <p>{{ userPlant.plant.species.Name }} {{ userPlant.plant.name }} </p>
                    <form 
                    action="{{path('users.delete', {id: userPlant.id}) }}" 
                    method="POST" 
                    onsubmit="return confirm('Êtes-vous certain de vouloir supprimer cette plante de votre profil ? Cette action est irréversible')"
                    enctype="multipart/form-data">
                    <input type="hidden" name="token" value="{{ csrf_token('delete'~ userPlant.id) }}">
                    <button type="submit">Supprimer cette plante</button>
            </form>
                </li>
            {% endfor %}
        </ul>
    {% endif %}


{% endblock %}